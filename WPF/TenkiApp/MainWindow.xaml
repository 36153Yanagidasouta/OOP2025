<Window x:Class="TenkiApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="天気予報システム Ver.1.0" Height="650" Width="950"
        Background="#000080"
        ResizeMode="CanMinimize"
        WindowStyle="SingleBorderWindow">

    <Window.Resources>
        <Style x:Key="RetroButton" TargetType="Button">
            <Setter Property="Background" Value="#C0C0C0"/>
            <Setter Property="Foreground" Value="#000000"/>
            <Setter Property="FontFamily" Value="MS UI Gothic, Courier New"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#FFFFFF"/>
            <Setter Property="BorderThickness" Value="2,2,2,2"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderThickness="3">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#FFFFFF" Offset="0"/>
                                    <GradientStop Color="#808080" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#808080"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="RetroTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Foreground" Value="#000000"/>
            <Setter Property="FontFamily" Value="MS UI Gothic, Courier New"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#808080"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="5"/>
        </Style>

        <DrawingBrush x:Key="ScanlineBrush" 
                      Viewport="0,0,1,3" 
                      ViewportUnits="Absolute" 
                      TileMode="Tile">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="#10000000">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

        <Storyboard x:Key="ScrollingStoryboard" RepeatBehavior="Forever" AutoReverse="False">
            <DoubleAnimation
                Storyboard.TargetName="ScrollingText"
                Storyboard.TargetProperty="(Canvas.Left)"
                From="950" To="-400" Duration="0:0:10" />
        </Storyboard>

    </Window.Resources>

    <Grid>
        <Rectangle Fill="#000080" Panel.ZIndex="0"/>

        <Rectangle Fill="{StaticResource ScanlineBrush}" 
                   Panel.ZIndex="10" 
                   IsHitTestVisible="False"
                   Opacity="0.3"/>

        <Canvas Name="DotPattern" Panel.ZIndex="1" IsHitTestVisible="False">
            <Canvas.Background>
                <DrawingBrush Viewport="0,0,4,4" 
                              ViewportUnits="Absolute" 
                              TileMode="Tile">
                    <DrawingBrush.Drawing>
                        <GeometryDrawing Brush="#20FFFFFF">
                            <GeometryDrawing.Geometry>
                                <EllipseGeometry Center="2,2" RadiusX="0.5" RadiusY="0.5"/>
                            </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                    </DrawingBrush.Drawing>
                </DrawingBrush>
            </Canvas.Background>
        </Canvas>

        <Border Panel.ZIndex="5"
                Background="#C0C0C0"
                BorderThickness="4"
                Margin="40"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Width="820"
                Height="530">

            <Grid Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="15"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="15"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0" 
                        Background="#000080" 
                        Padding="8"
                        BorderThickness="2"
                        BorderBrush="#FFFFFF">
                    <TextBlock Text="◆ 天気予報◆" 
                               Foreground="#FFFFFF"
                               FontFamily="MS UI Gothic, Courier New"
                               FontSize="18"
                               FontWeight="Bold"
                               HorizontalAlignment="Center"/>
                </Border>

                <Border Grid.Row="2" 
                        Background="#FFFFFF"
                        BorderThickness="3"
                        Padding="20">
                    <Border.BorderBrush>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#808080" Offset="0"/>
                            <GradientStop Color="#FFFFFF" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.BorderBrush>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" 
                                Background="#000080" 
                                Padding="10"
                                BorderThickness="2"
                                BorderBrush="#808080">
                            <StackPanel>
                                <TextBlock Text="▼ 都道府県名を入力してください"
                                           Foreground="#00FF00"
                                           FontFamily="MS UI Gothic, Courier New"
                                           FontSize="14"
                                           Margin="0,0,0,8"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="10"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBox x:Name="CityInput"
                                             Grid.Column="0"
                                             Style="{StaticResource RetroTextBox}"
                                             Height="32"
                                             VerticalContentAlignment="Center"/>

                                    <Button x:Name="SearchButton"
                                            Grid.Column="2"
                                            Content="[検索]"
                                            Style="{StaticResource RetroButton}"
                                            Width="100"
                                            Height="32"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Grid.Row="2" 
                                Background="#000000"
                                BorderThickness="3"
                                Padding="15">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#808080" Offset="0"/>
                                    <GradientStop Color="#000000" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- 天気アイコン部 -->
                                <Border Grid.Column="0"
                                        Background="#C0C0C0"
                                        BorderThickness="3"
                                        BorderBrush="#808080"
                                        Width="140"
                                        Height="180"
                                        VerticalAlignment="Top"
                                        Padding="10">
                                    <StackPanel VerticalAlignment="Center" Height="303">
                                        <Image Name="WeatherIcon"
                                               Width="80" 
                                               Height="80"
                                               HorizontalAlignment="Center"
                                               Margin="0,0,0,5"/>

                                        <!-- 天気絵文字 -->
                                        <TextBlock Name="WeatherEmojiText"
                                                   Text="☀️"
                                                   FontSize="60"
                                                   HorizontalAlignment="Center"
                                                   TextAlignment="Center"
                                                   Margin="0,5,0,0"/>

                                        <!-- 天気説明文字 -->
                                        <TextBlock Name="WeatherDescText"
                                                   Text="天気"
                                                   FontFamily="MS UI Gothic"
                                                   FontSize="16"
                                                   FontWeight="Bold"
                                                   HorizontalAlignment="Center"
                                                   Foreground="#000000"
                                                   TextAlignment="Center"
                                                   TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>

                                <!-- 情報表示部 -->
                                <StackPanel Grid.Column="2" VerticalAlignment="Top">
                                    <!-- ヘッダー -->
                                    <Border Background="#008080" 
                                            Padding="8"
                                            BorderThickness="2"
                                            BorderBrush="#00FFFF"
                                            Margin="0,0,0,10">
                                        <StackPanel>
                                            <TextBlock Name="CityText"
                                                       Text="都道府県"
                                                       Foreground="#FFFF00"
                                                       FontFamily="MS UI Gothic"
                                                       FontSize="20"
                                                       FontWeight="Bold"/>

                                            <TextBlock Name="DateText"
                                                       Text="YYYY/MM/DD HH:mm"
                                                       Foreground="#00FFFF"
                                                       FontFamily="Courier New"
                                                       FontSize="12"
                                                       Margin="0,5,0,0"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- データ表示 -->
                                    <Border Background="#C0C0C0"
                                            BorderThickness="2"
                                            BorderBrush="#808080"
                                            Padding="20">
                                        <StackPanel>
                                            <!-- 気温とUV指数 -->
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="[ 気温 ]"
                                                               Foreground="#FFFFFF"
                                                               Background="#000080"
                                                               FontFamily="Courier New"
                                                               Padding="5,0"
                                                               FontSize="16"
                                                               FontWeight="Bold"
                                                               Width="80"
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Name="TemperatureText"
                                                               Text="--℃"
                                                               Foreground="#FF0000"
                                                               FontFamily="Courier New"
                                                               FontSize="22"
                                                               FontWeight="Bold"
                                                               VerticalAlignment="Center"
                                                               Margin="10,0,20,0" 
                                                               Width="100"/>
                                                </StackPanel>

                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                    <TextBlock Text="UV:" 
                                                               Foreground="#FFFFFF"
                                                               Background="#000080"
                                                               FontFamily="Courier New" 
                                                               FontSize="20" 
                                                               FontWeight="Bold" 
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Name="UVIndexText" 
                                                               Text="測定中" 
                                                               Foreground="#FF0000" 
                                                               FontFamily="Courier New" 
                                                               FontSize="20" 
                                                               FontWeight="Bold" 
                                                               Margin="5,0,0,0"
                                                               VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- 湿度 -->
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                                <TextBlock Text="[ 湿度 ]"
                                                           Foreground="#FFFFFF"
                                                           Background="#000080"
                                                           FontFamily="Courier New"
                                                           Padding="5,0"
                                                           FontSize="16"
                                                           FontWeight="Bold"
                                                           Width="80"
                                                           VerticalAlignment="Center"/>
                                                <TextBlock Name="HumidityText"
                                                           Text="-- %"
                                                           Foreground="#0000FF"
                                                           FontFamily="Courier New"
                                                           FontSize="22"
                                                           FontWeight="Bold"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>
                                            </StackPanel>

                                            <!-- 風速 -->
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="[ 風速 ]"
                                                           Foreground="#FFFFFF"
                                                           Background="#000080"
                                                           FontFamily="Courier New"
                                                           Padding="5,0"
                                                           FontSize="16"
                                                           FontWeight="Bold"
                                                           Width="80"
                                                           VerticalAlignment="Center"/>
                                                <TextBlock Name="WindText"
                                                           Text="-- m/s"
                                                           Foreground="#008000"
                                                           FontFamily="Courier New"
                                                           FontSize="22"
                                                           FontWeight="Bold"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>
                                            </StackPanel>

                                            <!-- 服装アドバイス -->
                                            <Border Background="#E0E0E0"
                                                    BorderThickness="1"
                                                    BorderBrush="#008080"
                                                    Padding="10"
                                                    Margin="0,20,0,0">
                                                <StackPanel>
                                                    <TextBlock Text="[ 服装アドバイス ]"
                                                               Foreground="#000080"
                                                               FontFamily="MS UI Gothic"
                                                               FontSize="14"
                                                               FontWeight="Bold"
                                                               Margin="0,0,0,5"/>

                                                    <TextBlock Name="ClothingAdviceText"
                                                               Text="取得中..."
                                                               Foreground="#000000"
                                                               FontFamily="MS UI Gothic"
                                                               FontSize="13"
                                                               TextWrapping="Wrap"
                                                               Padding="5"/>
                                                </StackPanel>
                                            </Border>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>

                <!-- 下部ステータス -->
                <Border Grid.Row="4" 
                        Background="#000000"
                        BorderThickness="2"
                        BorderBrush="#808080"
                        Padding="10,8"
                        HorizontalAlignment="Center">
                    <TextBlock Text="■ AUTO UPDATE (5MIN)"
                               Foreground="#00FF00"
                               FontFamily="Courier New"
                               FontSize="12"
                               FontWeight="Bold"/>
                </Border>
            </Grid>
        </Border>

        <!-- ブラウン管の歪み効果 -->
        <Border Panel.ZIndex="15" IsHitTestVisible="False">
            <Border.Background>
                <RadialGradientBrush Center="0.5,0.5" RadiusX="0.8" RadiusY="0.8">
                    <GradientStop Color="Transparent" Offset="0.5"/>
                    <GradientStop Color="#40000000" Offset="1"/>
                </RadialGradientBrush>
            </Border.Background>
        </Border>

        <!-- スクロールテキスト -->
        <Canvas Panel.ZIndex="20">
            <TextBlock x:Name="ScrollingText" 
                       FontSize="24" 
                       FontFamily="Courier New" 
                       Foreground="Yellow"
                       Text="― 起動中... 天気情報を取得しています。しばらくお待ちください。 ―"
                       Canvas.Left="-400"
                       Canvas.Top="10"/>

            <Canvas.Triggers>
                <EventTrigger RoutedEvent="Canvas.Loaded">
                    <BeginStoryboard Storyboard="{StaticResource ScrollingStoryboard}" />
                </EventTrigger>
            </Canvas.Triggers>
        </Canvas>

    </Grid>
</Window>